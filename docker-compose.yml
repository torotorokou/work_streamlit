services:
    yolo_sam:
        image: work_yolo:latest # Dockerfileã§ãƒ“ãƒ«ãƒ‰ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸å
        build:
            context: . # DockerfileãŒå­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
        deploy:
            resources:
                reservations:
                    devices:
                        - driver: nvidia
                          count: all # å…¨ã¦ã®GPUã‚’åˆ©ç”¨
                          capabilities: [gpu]
        volumes:
            - 'C:\Users\synth\Desktop\works_env\:/work'
            - 'D:\02.Work_Data\:/work/Data'
        environment:
            - NVIDIA_VISIBLE_DEVICES=all # å…¨ã¦ã®GPUã‚’ä½¿ç”¨
            - NVIDIA_DRIVER_CAPABILITIES=compute,utility # å¿…è¦ãªãƒ‰ãƒ©ã‚¤ãƒæ©Ÿèƒ½
        stdin_open: true # å¿…è¦ãªã‚‰ã‚³ãƒ³ãƒ†ãƒŠã®æ¨™æº–å…¥åŠ›ã‚’é–‹ã
        tty: true # ã‚³ãƒ³ãƒ†ãƒŠã‚’å¯¾è©±ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
        ports:
            - '8888:8888' # JupyterLabã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ãƒãƒ¼ãƒˆå…¬é–‹
        shm_size: '30G' # ğŸ”µ è¿½åŠ : `/dev/shm` ã‚’ 8GB ã«æ‹¡å¼µ
