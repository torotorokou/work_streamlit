# --- プロンプト構築 ---


def build_category_suggestion_prompt(query_input):
    """カテゴリ推定用プロンプトを作成"""
    return f"""
    以下は、日本の産業廃棄物処理に関する教育用AIシステムで使われるカテゴリの一覧です：
    - 処理工程
    - 設備
    - 行政・許認可
    - 産廃分類・品目
    - 施設
    
    次の質問は、どのカテゴリに分類するのがもっとも適切でしょうか？
    カテゴリ名を1つだけ出力してください。（それ以外は出力しないでください）
    
    【質問】
    {query_input}
    """


def build_answer_prompt(context, query):
    """回答生成用プロンプトを作成"""
    return f"""
    以下は、産業廃棄物の処理・設備・工程に関する構造化技術文書の抜粋です。
    この抜粋に基づき、以下の質問に対して **できる限り文書内容を優先しながら、工程順・論理順に沿って正確かつ実務的に**答えてください。
    
    【資料抜粋】
    {context}
    
    【質問】
    {query}
    
    ### 【回答ルール】
    1. 資料の記載に基づいて回答してください。
    2. 明記がない場合は一般的見解で補足してください。
    3. 回答は 1. 2. 3. のように箇条書きで。
    4. 信頼度や出典（ページ番号）も可能な限り明示してください。
    """

def build_prompt(query: str, context: str) -> str:
    return build_answer_prompt(context, query)